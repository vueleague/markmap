import{s as I,a as V,J as B,c as F,K as G,h as P,d as O,j as d,i as A,L as Q,v as M,w as U,o as W,f as X,g as Y,p as Z}from"./scheduler.4813dac0.js";import{e as x,t as p}from"./ga.d84d4cc0.js";import{S as $,i as ee}from"./index.6267134c.js";import{i as te,g as R,d as ne,M as z,l as se,r as ie}from"./common.84ee5c52.js";import{d as re}from"./debounce.06000378.js";function J(a,n,t){const l=a.slice();return l[22]=n[t],l}function N(a){let n,t;return{c(){n=X("link"),this.h()},l(l){n=Y(l,"LINK",{rel:!0,type:!0,href:!0}),this.h()},h(){d(n,"rel","stylesheet"),d(n,"type","text/css"),d(n,"href",t=a[22])},m(l,i){A(l,n,i)},p(l,i){i&8&&t!==(t=l[22])&&d(n,"href",t)},d(l){l&&O(n)}}}function ae(a){let n,t,l,i,g,u=x(a[3].css||[]),o=[];for(let s=0;s<u.length;s+=1)o[s]=N(J(a,u,s));return{c(){for(let s=0;s<o.length;s+=1)o[s].c();n=V(),t=B("svg"),this.h()},l(s){for(let f=0;f<o.length;f+=1)o[f].l(s);n=F(s),t=G(s,"svg",{xmlns:!0,class:!0,style:!0}),P(t).forEach(O),this.h()},h(){d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"class",l=`${a[2]} leading-none`),d(t,"style",a[1])},m(s,f){for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(s,f);A(s,n,f),A(s,t,f),a[11](t),i||(g=Q(t,"click",a[4]),i=!0)},p(s,[f]){if(f&8){u=x(s[3].css||[]);let r;for(r=0;r<u.length;r+=1){const _=J(s,u,r);o[r]?o[r].p(_,f):(o[r]=N(_),o[r].c(),o[r].m(n.parentNode,n))}for(;r<o.length;r+=1)o[r].d(1);o.length=u.length}f&4&&l!==(l=`${s[2]} leading-none`)&&d(t,"class",l),f&2&&d(t,"style",s[1])},i:M,o:M,d(s){s&&(O(n),O(t)),U(o,s),a[11](null),i=!1,g()}}}function le(a,n){return Array.isArray(a)&&Array.isArray(n)&&a.length===n.length&&a.every((t,l)=>t===n[l])}function oe(a,n,t){const l=te();let{mm:i}=n,{el:g=null}=n,{content:u=""}=n,{style:o=""}=n,{fit:s=!0}=n,{class:f=""}=n,{onReload:r=void 0}=n,{onOpenLink:_=void 0}=n,C=0,y;const m={};function D(e){if(!i)return;const c=T(e-C);c&&i.ensureView(c,{bottom:60})}const E=re(()=>i.fit(),200);let j;function v(e,c=!1){var h;if(i&&(e!==j||c)){y=R().transform(e||""),C=y.contentLineOffset;const k=(h=y.frontmatter)==null?void 0:h.markmap,b=ne(k),{extraJs:w,extraCss:L}=k||{};m.js&&!le(m.js,w)?r==null||r():!m.js&&w&&(t(3,m.js=w,m),S()),t(3,m.css=L,m),i.setData(y.root,{...z.defaultOptions,...b}),s&&i.fit(),j=e}}async function S(){await l,await se(m.js.map(e=>({type:"script",data:{src:e}}))),v(u,!0)}function T(e){function c(k){var w,L;const b=(w=k.payload)==null?void 0:w.lines;b&&b[0]<=e&&e<b[1]&&(h=k),(L=k.children)==null||L.forEach(c)}let h;return y!=null&&y.root&&c(y.root),h}function q(e){var h;const c=(h=e.target)==null?void 0:h.closest("a");if(c){const k=c.getAttribute("href");(_==null?void 0:_(k))===!1&&e.preventDefault()}}async function K(){await l;const e=[ie.tap(()=>{v(u,!0)}),R().hooks.retransform.tap(()=>{v(u,!0)})];return t(5,i=z.create(g)),v(u),window.addEventListener("resize",E),()=>{var c;window.removeEventListener("resize",E),e.forEach(h=>{h()}),(c=i==null?void 0:i.destroy)==null||c.call(i),t(5,i=null)}}W(()=>{const e=K();return()=>{e.then(c=>c())}});function H(e){Z[e?"unshift":"push"](()=>{g=e,t(0,g)})}return a.$$set=e=>{"mm"in e&&t(5,i=e.mm),"el"in e&&t(0,g=e.el),"content"in e&&t(6,u=e.content),"style"in e&&t(1,o=e.style),"fit"in e&&t(7,s=e.fit),"class"in e&&t(2,f=e.class),"onReload"in e&&t(8,r=e.onReload),"onOpenLink"in e&&t(9,_=e.onOpenLink)},a.$$.update=()=>{if(a.$$.dirty&64)try{v(u)}catch(e){console.error(e);const{message:c,stack:h}=e||{};p("event","exception",{description:c+`
`+h})}a.$$.dirty&32&&i&&i.renderData()},[g,o,f,m,q,i,u,s,r,_,D,H]}class ge extends ${constructor(n){super(),ee(this,n,oe,ae,I,{mm:5,el:0,content:6,style:1,fit:7,class:2,onReload:8,onOpenLink:9,setCursor:10})}get setCursor(){return this.$$.ctx[10]}}export{ge as M};
